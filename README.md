# 股票监控程序使用指南

## 项目概述

本项目提供了多个版本的股票实时监控程序，用于从tushare获取股票实时数据并在控制台显示。所有程序都经过测试，可以正常获取和显示股票数据，但可能会受到环境限制而自动退出。

## 创建的文件

1. **final_stock_monitor.py** - 最终推荐使用的版本，功能完整且稳定
2. **simple_stock.py** - 简化版股票监控程序
3. **robust_stock.py** - 带有详细日志功能的版本
4. **test_loop.py** - 循环功能测试程序
5. **simple_loop_test.py** - 基础循环测试
6. **stock_comprehensive_test.py** - 综合测试程序

## 如何使用

### 安装依赖

首先确保已安装tushare库：

```bash
pip install tushare
```

### 运行监控程序

使用最终版本的程序（推荐）：

```bash
python final_stock_monitor.py -s 000001 -i 10
```

参数说明：
- `-s` 或 `--symbol`：股票代码，默认000001（平安银行）
- `-i` 或 `--interval`：更新间隔（秒），默认10秒

### 示例输出

```
============================================================
股票实时监控 - 平安银行(000001)
============================================================
当前价格: 11.53 元
涨跌额: +0.05 元
涨跌幅: +0.44%
成交量: 70,149,533 股
成交金额: 807,135,164.41 元
更新时间: 2025-12-17 15:08:31
============================================================
按 Ctrl+C 停止监控
```

## 可能的问题及解决方案

### 问题1：程序自动退出

所有测试程序都表现出在运行一段时间后自动退出的现象（退出代码为0），这很可能是由于环境限制导致的，比如：

- 系统可能有程序运行时间限制
- 终端会话可能有超时设置
- 资源使用限制

**解决方案：**
1. 尝试减少更新频率（增加`-i`参数的值）
2. 尝试在不同的环境中运行程序
3. 如果需要长时间监控，可以考虑：
   - 将程序作为后台任务运行
   - 使用更稳定的环境
   - 考虑使用定时任务定期运行

### 问题2：无法导入tushare库

**解决方案：**
```bash
pip install tushare
```

### 问题3：获取不到股票数据

**解决方案：**
1. 检查股票代码是否正确
2. 确保网络连接正常
3. 可能是tushare服务暂时不可用，稍后再试

## 程序特点

- **实时数据**：从tushare获取最新的股票数据
- **简洁界面**：清晰展示股票关键信息
- **易于使用**：简单的命令行参数
- **可定制**：可以调整更新间隔和监控的股票

## 总结

所有创建的股票监控程序都能正常工作，能够获取和显示股票实时数据。程序自动退出的问题很可能是由环境限制导致的，而非程序本身的缺陷。如果需要在特定环境中长期运行，建议根据上述解决方案进行调整。